---
title: 1.类加载过程简单介绍
date: 2019-03-10 22:21:09
tags:
  - jvm
categories:
  - JVM学习
---

# 类加载器解析以及阶段分解

java_**类型**_（不涉及对象）加载、连接和初始化都是在**程序运行期间**完成的，这中设计在灵活性上面增加了更多的可能性（例如动态代理）

用来加载类的工具就是类加载器

<!-- more -->

## 类加载的过程

![详细流程图](img/流程.png)

### 1. [**加载**](/2019/03/18/JVM类的加载/)

    类的加载指的是将类的.class文件中的二进制数据读入到内存中，将其放在**运行时数据区的方法区**内，
    然后再在内存中创建一个java.lang.Class对象（规范并未说明Class对象位于哪里，HotSpot虚拟机将其放在方法区中）
    用来封装类在方法区内的数据结构

### 2. 连接

    * 验证：确保类加载的正确性
    * 准备：为类的静态变量分配内存，并初始化默认值（静态变量只分配这一次内存）
    * 解析：符号引用解析为直接引用

[符号引用与直接引用介绍](/2019/03/18/符号引用VS间接引用/)

### 3. [初始化](/2019/03/18/类初始化介绍/)

    类的静态变量赋予正确初始值

### 4. 开发过程中类的使用

    调用类得相应的方法，开发者最常参与的过程

### 5. 类的卸载

    内存中去掉（卸载完成中之后，类就不能使用和创建了，因为在内存中该类型
       已经不存在了，想要使用需要重新加载。例如：osgi）

```bash

  public static int a=1;

1. 静态变量a分配内存，初始化默认值为_**0**_
2. 在初始化过程中，为a赋值为1
  
```

`**注： **
   类加载过程，总体是按照顺序，但并不是严格按照顺序进行的。比如：在加载过程中可能会执行初始化中的某些处理。`

## JVM结束生命周期的方法

* System.exit();

* 程序正常结束

* 遇到异常或者错误，异常终止

* 操作系统错误而导致（开发者不可控的因素）
